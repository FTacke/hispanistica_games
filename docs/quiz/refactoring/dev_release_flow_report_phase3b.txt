dev_release_flow_v2.ps1
Timestamp: 2026-01-30 09:07:40
Release ID: release_20260130_090740_dev
Project Root: C:\dev\hispanistica_games
ENV=dev
QUIZ_MECHANICS_VERSION=v2
QUIZ_DEV_SEED_MODE=none
FLASK_SECRET_KEY set: True
AUTH_DATABASE_URL set: True

Copied unit: content/quiz/topics/variation_aussprache_v2.json -> media/releases/release_20260130_090740_dev/units/variation_aussprache.json
media/current link mode: junction

Command: python manage.py import-content --units-path media/current/units --audio-path media/current/audio --release release_20260130_090740_dev
python.exe : [2026-01-30 09:07:40] INFO: Auth DB connection verified: sqlite:///C:/dev/hispanistica_games/data/db/auth.db
In C:\dev\hispanistica_games\scripts\dev_release_flow_v2.ps1:79 Zeichen:17
+ ... ortOutput = & $python (Join-Path $ProjectRoot "manage.py") import-con ...
+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: ([2026-01-30 09:...data/db/auth.db:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
[2026-01-30 09:07:40] INFO: games_hispanistica application startup
[2026-01-30 09:07:40] INFO: Logging to: C:\dev\hispanistica_games\data\import_logs\20260130_090740_import_release_20260130_090740_dev.log
[2026-01-30 09:07:40] INFO: Starting import for release 'release_20260130_090740_dev'
[2026-01-30 09:07:40] INFO: Units path: media/current/units
[2026-01-30 09:07:40] INFO: Audio path: media/current/audio
[2026-01-30 09:07:40] INFO: Found 1 JSON files
[2026-01-30 09:07:40] INFO: Phase 1: Validating units...
[2026-01-30 09:07:40] INFO: \u2713 variation_aussprache.json: 18 questions, 0 audio refs
[2026-01-30 09:07:40] INFO: Phase 2: Checking audio files...
[2026-01-30 09:07:40] INFO: \u2713 Audio files: 0 unique files
[2026-01-30 09:07:40] INFO: Phase 3: Importing to database...
[2026-01-30 09:07:40] INFO: Created release record: release_20260130_090740_dev
[2026-01-30 09:07:40] INFO: \u2713 Imported variation_aussprache: 18 questions
[2026-01-30 09:07:40] ERROR: Import failed with exception: (sqlite3.ProgrammingError) Error binding parameter 1: type 'list' is not supported
[SQL: UPDATE quiz_topics SET authors=?, release_id=? WHERE quiz_topics.id = ?]
[parameters: (['Frederike Lau', 'Mika', 'Karina Stephan Quezada', 'Felix Tacke (Koordination)'], 'release_20260130_090740_dev', 
'variation_aussprache')]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.ProgrammingError: Error binding parameter 1: type 'list' is not supported

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\dev\hispanistica_games\game_modules\quiz\import_service.py", line 487, in import_release
    session.commit()
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4345, in flush
    self._flush(objects)
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4480, in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4441, in _flush
    flush_context.execute()
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 85, in save_obj
    _emit_update_statements(
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 912, in _emit_update_statements
    c = connection.execute(
        ^^^^^^^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (sqlite3.ProgrammingError) Error binding parameter 1: type 'list' is not supported
[SQL: UPDATE quiz_topics SET authors=?, release_id=? WHERE quiz_topics.id = ?]
[parameters: (['Frederike Lau', 'Mika', 'Karina Stephan Quezada', 'Felix Tacke (Koordination)'], 'release_20260130_090740_dev', 
'variation_aussprache')]
(Background on this error at: https://sqlalche.me/e/20/f405)
\u2717 Import failed
  - (sqlite3.ProgrammingError) Error binding parameter 1: type 'list' is not supported
[SQL: UPDATE quiz_topics SET authors=?, release_id=? WHERE quiz_topics.id = ?]
[parameters: (['Frederike Lau', 'Mika', 'Karina Stephan Quezada', 'Felix Tacke (Koordination)'], 'release_20260130_090740_dev', 
'variation_aussprache')]
(Background on this error at: https://sqlalche.me/e/20/f405)

Command: python manage.py publish-release --release release_20260130_090740_dev
python.exe : [2026-01-30 09:07:41] INFO: Auth DB connection verified: sqlite:///C:/dev/hispanistica_games/data/db/auth.db
In C:\dev\hispanistica_games\scripts\dev_release_flow_v2.ps1:84 Zeichen:18
+ ... ishOutput = & $python (Join-Path $ProjectRoot "manage.py") publish-re ...
+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: ([2026-01-30 09:...data/db/auth.db:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
[2026-01-30 09:07:41] INFO: games_hispanistica application startup
[2026-01-30 09:07:41] INFO: Logging to: C:\dev\hispanistica_games\data\import_logs\20260130_090741_publish_release_20260130_090740_dev.log
[2026-01-30 09:07:41] INFO: Publishing release: release_20260130_090740_dev
[2026-01-30 09:07:41] ERROR: Release not found: release_20260130_090740_dev
\u2717 Publish failed
  - Release not found: release_20260130_090740_dev

Command: python manage.py quiz-db-report
python.exe : [2026-01-30 09:07:42] INFO: Auth DB connection verified: sqlite:///C:/dev/hispanistica_games/data/db/auth.db
In C:\dev\hispanistica_games\scripts\dev_release_flow_v2.ps1:89 Zeichen:13
+ $dbReport = & $python (Join-Path $ProjectRoot "manage.py") quiz-db-re ...
+             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: ([2026-01-30 09:...data/db/auth.db:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
[2026-01-30 09:07:42] INFO: games_hispanistica application startup
\u2717 Fatal error: (sqlite3.OperationalError) no such column: quiz_runs.question_started_at
[SQL: SELECT count(*) AS count_1 
FROM (SELECT quiz_runs.id AS quiz_runs_id, quiz_runs.player_id AS quiz_runs_player_id, quiz_runs.topic_id AS quiz_runs_topic_id, 
quiz_runs.status AS quiz_runs_status, quiz_runs.created_at AS quiz_runs_created_at, quiz_runs.finished_at AS quiz_runs_finished_at, 
quiz_runs.current_index AS quiz_runs_current_index, quiz_runs.run_questions AS quiz_runs_run_questions, quiz_runs.joker_remaining AS 
quiz_runs_joker_remaining, quiz_runs.joker_used_on AS quiz_runs_joker_used_on, quiz_runs.question_started_at AS quiz_runs_question_started_at, 
quiz_runs.expires_at AS quiz_runs_expires_at, quiz_runs.time_limit_seconds AS quiz_runs_time_limit_seconds, quiz_runs.question_started_at_ms AS 
quiz_runs_question_started_at_ms, quiz_runs.deadline_at_ms AS quiz_runs_deadline_at_ms 
FROM quiz_runs) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
[2026-01-30 09:07:42] ERROR: quiz-db-report failed with exception
Traceback (most recent call last):
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: no such column: quiz_runs.question_started_at

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\dev\hispanistica_games\manage.py", line 288, in quiz_db_report
    "quiz_runs": session.query(QuizRun).count(),
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 3146, in count
    self._legacy_from_self(col).enable_eagerloads(False).scalar()
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2835, in scalar
    ret = self.one()
          ^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2808, in one
    return self._iter().one()  # type: ignore
           ^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "C:\dev\hispanistica_games\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: quiz_runs.question_started_at
[SQL: SELECT count(*) AS count_1 
FROM (SELECT quiz_runs.id AS quiz_runs_id, quiz_runs.player_id AS quiz_runs_player_id, quiz_runs.topic_id AS quiz_runs_topic_id, 
quiz_runs.status AS quiz_runs_status, quiz_runs.created_at AS quiz_runs_created_at, quiz_runs.finished_at AS quiz_runs_finished_at, 
quiz_runs.current_index AS quiz_runs_current_index, quiz_runs.run_questions AS quiz_runs_run_questions, quiz_runs.joker_remaining AS 
quiz_runs_joker_remaining, quiz_runs.joker_used_on AS quiz_runs_joker_used_on, quiz_runs.question_started_at AS quiz_runs_question_started_at, 
quiz_runs.expires_at AS quiz_runs_expires_at, quiz_runs.time_limit_seconds AS quiz_runs_time_limit_seconds, quiz_runs.question_started_at_ms AS 
quiz_runs_question_started_at_ms, quiz_runs.deadline_at_ms AS quiz_runs_deadline_at_ms 
FROM quiz_runs) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)

