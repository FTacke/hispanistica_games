# =============================================================================
# games.hispanistica Production Environment Variables
# =============================================================================
#
# This file should be deployed to production server at:
#   /srv/webapps/games_hispanistica/config/.env.prod
#
# Or merged into passwords.env
#
# =============================================================================

# -----------------------------------------------------------------------------
# Docker Configuration (Production)
# -----------------------------------------------------------------------------

# Docker network - MUST match existing production network
# games_hispanistica shares the corapan-network in production
DOCKER_NETWORK=corapan-network

# -----------------------------------------------------------------------------
# Flask Configuration (Production)
# -----------------------------------------------------------------------------

FLASK_ENV=production
FLASK_DEBUG=false
FLASK_SESSION_SECURE=true
FLASK_SESSION_SAMESITE=lax

# CRITICAL: Set these to strong random secrets!
# Generate: python -c "import secrets; print(secrets.token_hex(32))"
FLASK_SECRET_KEY=CHANGE_ME_TO_RANDOM_SECRET
JWT_SECRET_KEY=CHANGE_ME_TO_RANDOM_SECRET

# -----------------------------------------------------------------------------
# Database Configuration (Production)
# -----------------------------------------------------------------------------

# PostgreSQL connection (adjust if using separate DB server)
AUTH_DATABASE_URL=postgresql://hispanistica_auth:CHANGE_ME@localhost:5432/hispanistica_auth

# Password hashing
AUTH_HASH_ALGO=argon2

# =============================================================================
# Admin User Bootstrap (FIRST DEPLOYMENT ONLY)
# =============================================================================
#
# CRITICAL: These variables should ONLY be set on initial deployment.
# For subsequent deployments and password resets, use the dedicated CLI:
#
#   ssh root@games.hispanistica.com
#   cd /srv/webapps/games_hispanistica/app
#   python scripts/admin_reset_password.py --username admin --password NEWPASS
#
# Setting these on every deploy will NOT overwrite existing passwords
# (see docker-entrypoint.sh for details), but they should still be removed
# after initial deployment to prevent confusion.
#
# To enable bootstrap on first deployment:
#   1. Uncomment and set ADMIN_BOOTSTRAP=1 below
#   2. Set START_ADMIN_PASSWORD=<secure_password>
#   3. Deploy with: docker-compose -f docker-compose.prod.yml up -d
#   4. After successful login, remove ADMIN_BOOTSTRAP and START_ADMIN_PASSWORD
#   5. Redeploy to lock in the change

# ADMIN_BOOTSTRAP=1
# START_ADMIN_USERNAME=admin
# START_ADMIN_PASSWORD=CHANGE_ME_SECURE_PASSWORD

# -----------------------------------------------------------------------------
# Security Settings
# -----------------------------------------------------------------------------

JWT_COOKIE_SECURE=true
JWT_ALG=HS256

# Account cleanup (days after soft-delete)
AUTH_ACCOUNT_ANONYMIZE_AFTER_DAYS=90
